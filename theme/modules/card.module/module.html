{% require_css %}
  <style>
    {% scope_css %}
      .text-align {
        text-align: {{ module.styles.align_text.text_align }}
      }
      .image-align-left {
        justify-content: start;
      }
      .image-align-right {
        justify-content: end;
      }
      .image-align-center {
        justify-content: center;
      }
    {% end_scope_css %}
  </style>
{% end_require_css %}

{% if module.card | length == 3 %}
  {% set grid_col_class = 'lg:fj-grid-cols-3' %}
{% endif %}

<section class="fj-grid fj-grid-cols-1 fj-place-items-center fj-mx-auto {{ grid_col_class }}">
  {% for card in module.card %}
    <div class="fj-max-w-[400px] fj-text-balance fj-p-4">
      {% if card.image.src %}
        {% set sizeAttrs = card.image.size_type == "auto"
          ? 'style="max-width: 100%; height: auto;"'
          : card.image.size_type == "auto_custom_max"
          ? 'width="{{ card.image.max_width }}" height="{{ card.image.max_height }}" style="max-width: 100%; max-height: auto;"'
          : 'width="{{ card.image.width }}" height="{{ card.image.height }}"' %}
        {% set loadingAttr = card.image.loading != "disabled" ? 'loading="{{ card.image.loading }}"' : "" %}
        <div class="fj-flex image-align-{{ module.styles.image_alignment.horizontal_align | lower }}">
          <img src="{{ card.image.src }}" alt="{{ card.image.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
        </div>
      {% endif %}

      {% if card.text %}
        <span class="text-align fj-text-balance">{{ card.text }}</span>
      {% endif %}
    </div>
  {% endfor %}
</section>
