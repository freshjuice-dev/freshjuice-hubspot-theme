{% if module.enable_faq_schema %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for item in module.items %}
    {
      "@type": "Question",
      "name": "{{ item.question | striptags | escapejson }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ item.answer | escapejson }}"
      }
    }{{ ',' if not loop.last }}
    {% endfor %}
  ]
}
</script>
{% endif %}

<div x-data="{ active: 1 }" class="mx-auto max-w-3xl w-full min-h-[16rem] space-y-4">
  {% for item in module.items %}
  <div x-data="{
        id: {{ loop.index }},
        get expanded() { return this.active === this.id },
        set expanded(value) { this.active = value ? this.id : null },
    }" role="region" class="rounded-md bg-cursor shadow">
    <h2 class="my-0 leading-tight">
      <button
        @click="expanded = !expanded"
        :aria-expanded="expanded"
        class="flex w-full items-center justify-between px-6 py-4 text-xl font-bold"
      >
        <span>{{ item.question }}</span>
        <span x-show="expanded" aria-hidden="true" class="ml-4">&minus;</span>
        <span x-show="!expanded" aria-hidden="true" class="ml-4">&plus;</span>
      </button>
    </h2>
    <div x-show="expanded" x-collapse>
      <div class="px-6 pb-4 prose sm:prose-lg md:prose-xl">{{ item.answer }}</div>
    </div>
  </div>
  {% endfor %}
</div>

