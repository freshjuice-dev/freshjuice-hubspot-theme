{% set gist_id = module.gist_embed_code | split('.js') | first | split('/') | last %}
{% set widget_id = 'github-gist-' ~ name %}

<div id="{{ widget_id }}"
     class="not-prose js-gist-simple drop-shadow"
     data-id="{{ gist_id }}"
  {{ 'data-file="' ~ module.file_name ~ '"' if module.file_name }}
  {{ 'data-caption="' ~ module.caption ~ '"' if module.caption }}
  {{ 'data-lines="' ~ module.lines ~ '"' if module.lines }}
  {{ 'data-highlight-lines="' ~ module.highlight_lines ~ '"' if module.highlight_lines }}
     data-show-footer="{{ module.show_footer }}"
     data-show-line-numbers="{{ module.show_line_numbers }}"
     data-lines-expanded="{{ module.lines_expanded }}"
     data-theme="{{ module.theme }}"
     x-intersect.once="
       loadStylesheet('https://cdn.jsdelivr.net/npm/gist-simple@2.1.0/dist/gist-simple.min.css');
       loadScript('https://cdn.jsdelivr.net/npm/gist-simple@2.1.0/dist/gist-simple.min.js', 'defer', ()=>{ gistSimple(document.querySelectorAll('.js-gist-simple')) });
     ">
  <noscript>
    <p>please enable javascript to view the gist</p>
  </noscript>
</div>
